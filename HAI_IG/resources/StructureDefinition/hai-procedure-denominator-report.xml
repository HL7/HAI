<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="hai-procedure-denominator-report" />
  <url value="http://hl7.org/fhir/us/hai/StructureDefinition/hai-procedure-denominator-report" />
  <name value="HAI Procedure Denominator Report" />
  <status value="draft" />
  <publisher value="Lantana Consulting Group" />
  <contact>
    <name value="Eric Parapini" />
    <telecom>
      <system value="phone" />
      <value value="+13604405780" />
      <use value="work" />
    </telecom>
    <telecom>
      <system value="email" />
      <value value="eric.parapini@lantanagroup.com" />
      <use value="work" />
    </telecom>
  </contact>
  <description
    value="This report records a procedure performed. &#xA;&#xA;Preferred document title:  Denominator for Procedure Report&#xA;&#xA;Key encounter data:&#xA;&#xA;     The encounter type (inpatient or outpatient) is required.&#xA;&#xA;     If the patient was an inpatient, a value for admission date is required.&#xA;&#xA;     The facility id is required. Unit identifier and unit type are not reported.&#xA;&#xA;Other dates and locations:&#xA;&#xA;     The date of the procedure is recorded as effectiveTime in the Procedure Details Clinical Statement in a Procedure Report  (V2).&#xA;&#xA;Other notes: The procedure id is recorded in the Procedure Details Clinical Statement in a Procedure Report (V2). NHSN uses this to establish a link between Procedure and SSI Reports" />
  <kind value="resource" />
  <abstract value="false" />
  <contextType value="resource" />
  <context value="Composition" />
  <type value="Composition" />
  <baseDefinition value="http://hl7.org/fhir/us/hai/StructureDefinition/hai-single-person-generic-constraints" />
  <derivation value="constraint" />
  <differential>
    <element id="Composition">
      <path value="Composition" />
    </element>
    <element id="encounter">
      <path value="Composition.encounter" />
      <short value="encounter" />
      <definition
        value="SHALL contain exactly one [1..1] HAI Procedure Denominator Encounter (identifier: http://hl7.org/fhir/us/hai/StructureDefinition/hai-procedure-denominator-encounter) (CONF:3347-130)." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/us/hai/StructureDefinition/hai-procedure-denominator-encounter" />
      </type>
    </element>
    <element id="Composition.section">
      <path value="Composition.section" />
      <slicing>
        <discriminator>
          <type value="value" />
          <path value="title" />
        </discriminator>
        <discriminator>
          <type value="value" />
          <path value="code" />
        </discriminator>
        <discriminator>
          <type value="value" />
          <path value="entry" />
        </discriminator>
        <discriminator>
          <type value="value" />
          <path value="entry" />
        </discriminator>
        <discriminator>
          <type value="value" />
          <path value="entry" />
        </discriminator>
        <discriminator>
          <type value="value" />
          <path value="entry" />
        </discriminator>
        <discriminator>
          <type value="value" />
          <path value="entry" />
        </discriminator>
        <discriminator>
          <type value="value" />
          <path value="entry" />
        </discriminator>
        <rules value="open" />
      </slicing>
      <definition value="SHALL contain exactly one [1..1] section (CONF:3347-215) such that it" />
    </element>
    <element id="Composition.section:section2">
      <path value="Composition.section" />
      <sliceName value="section2" />
      <short value="section" />
      <definition value="SHALL contain exactly one [1..1] section (CONF:3347-211) such that it" />
      <min value="1" />
      <max value="1" />
    </element>
    <element id="Composition.section:section2.title">
      <path value="Composition.section.title" />
      <short value="title" />
      <definition value="SHALL contain exactly one [1..1] title=&quot;Procedure Details Section in a Procedure Report&quot; (CONF:3347-213)." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="string" />
      </type>
      <patternString value="Procedure Details Section in a Procedure Report" />
    </element>
    <element id="Composition.section:section2.code">
      <path value="Composition.section.code" />
      <short value="code" />
      <definition
        value="SHALL contain exactly one [1..1] code=&quot;51899-3&quot; Details Section (CodeSystem: LOINC urn:oid:2.16.840.1.113883.6.1) (CONF:3347-214)." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="CodeableConcept" />
      </type>
      <patternCodeableConcept>
        <coding>
          <system value="urn:oid:2.16.840.1.113883.6.1" />
          <code value="51899-3" />
        </coding>
      </patternCodeableConcept>
    </element>
    <element id="Composition.section:section2.entry">
      <path value="Composition.section.entry" />
      <short value="entry" />
      <definition
        value="SHALL contain exactly one [1..1] Procedure Details (identifier: http://hl7.org/fhir/us/hai/StructureDefinition/procedure-details) (CONF:3347-212)." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/us/hai/StructureDefinition/procedure-details" />
      </type>
    </element>
    <element id="Composition.section:section3">
      <path value="Composition.section" />
      <sliceName value="section3" />
      <short value="section" />
      <definition value="SHALL contain exactly one [1..1] section (CONF:3347-215) such that it" />
      <min value="1" />
      <max value="1" />
    </element>
    <element id="Composition.section:section3.title">
      <path value="Composition.section.title" />
      <short value="title" />
      <definition value="SHALL contain exactly one [1..1] title (CONF:3347-216)." />
      <min value="1" />
      <max value="1" />
    </element>
    <element id="Composition.section:section3.code">
      <path value="Composition.section.code" />
      <short value="code" />
      <definition
        value="SHALL contain exactly one [1..1] code=&quot;51898-5&quot; Risk Factors Section (CodeSystem: LOINC urn:oid:2.16.840.1.113883.6.1) (CONF:3347-217)." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="CodeableConcept" />
      </type>
      <patternCodeableConcept>
        <coding>
          <system value="urn:oid:2.16.840.1.113883.6.1" />
          <code value="51898-5" />
        </coding>
      </patternCodeableConcept>
    </element>
    <!-- SG: Commented out and moved asa-class below to make it a simple choice rather than a slice -->
    <!--<element id="Composition.section:section3.entry">
      <path value="Composition.section.entry" />
      <short value="entry" />
      <definition
        value="SHALL contain exactly one [1..1] ASA Class (identifier: http://hl7.org/fhir/us/hai/StructureDefinition/asa-class) (CONF:3347-218)." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/us/hai/StructureDefinition/asa-class" />
      </type>
    </element>-->
    <element id="Composition.section:section3.entry">
      <path value="Composition.section.entry" />
      <short value="entry" />
      <definition
        value="SHALL contain exactly one [1..1] Diabetes Melitus (identifier: http://hl7.org/fhir/us/hai/StructureDefinition/diabetes-melitus) (CONF:3347-219)." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/us/hai/StructureDefinition/diabetes-melitus" />
      </type>
      <!-- SG: Moved from commented out element above -->
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/us/hai/StructureDefinition/asa-class" />
      </type>
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/us/hai/StructureDefinition/height-observation" />
      </type>
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/us/hai/StructureDefinition/weight-observation" />
      </type>
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/us/hai/StructureDefinition/duration-of-labor" />
      </type>
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/us/hai/StructureDefinition/trauma-observation" />
      </type>
    </element>

    <!--<element id="Composition.section:section3.entry">
      <path value="Composition.section.entry" />
      <short value="entry" />
      <definition
        value="SHALL contain exactly one [1..1] Height Observation (identifier: http://hl7.org/fhir/us/hai/StructureDefinition/height-observation) (CONF:3347-247)." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/us/hai/StructureDefinition/height-observation" />
      </type>
      
    </element>-->
    <!--<element id="Composition.section:section3.entry">
      <path value="Composition.section.entry" />
      <short value="entry" />
      <definition
        value="SHALL contain exactly one [1..1] Weight Observation (identifier: http://hl7.org/fhir/us/hai/StructureDefinition/weight-observation) (CONF:3347-248)." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/us/hai/StructureDefinition/weight-observation" />
      </type>
    </element>-->
    <!--<element id="Composition.section:section3.entry">
      <path value="Composition.section.entry" />
      <short value="entry" />
      <definition
        value="SHALL contain exactly one [1..1] Duration of Labor  (identifier: http://hl7.org/fhir/us/hai/StructureDefinition/duration-of-labor) (CONF:3347-254)." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/us/hai/StructureDefinition/duration-of-labor" />
      </type>
    </element>-->
    <!--<element id="Composition.section:section3.entry">
      <path value="Composition.section.entry" />
      <short value="entry" />
      <definition
        value="SHALL contain exactly one [1..1] Trauma Observation (identifier: http://hl7.org/fhir/us/hai/StructureDefinition/trauma-observation) (CONF:3347-258)." />
      <min value="1" />
      <max value="1" />
      <type>
        <code value="Reference" />
        <targetProfile value="http://hl7.org/fhir/us/hai/StructureDefinition/trauma-observation" />
      </type>
    </element>-->
  </differential>
</StructureDefinition>
